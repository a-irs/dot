#!/usr/bin/env bash

set -euo pipefail

URL=$1
NS=$(echo "$URL" | rev | cut -d '/' -f 2 | rev)
REPO=$(echo "$URL" | rev | cut -d '/' -f 1 | rev | sed -E 's/\.git$//')

dest=$TMPDIR/git-peek/$NS/$REPO

clear
echo ":: $URL"
if [[ ! -d "$dest/.git" ]]; then
    echo ""
    git clone --depth=1 "$URL" "$dest"
fi
cd "$dest"
echo ""
ls -F
zsh
