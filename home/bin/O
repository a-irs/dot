#!/usr/bin/env bash

set -euo pipefail

n=$1
f=~/.O

line=$(grep -E "^$n:" -m 1 "$f")
hint=$(printf '%s' "$line" | cut -d: -f 2)
file_name=$(printf '%s' "$line" | cut -d: -f 3)
if [[ -n "$line" ]]; then
    # TODO preselect search query with
    # -c "/$search" -c "?$search"
    ${EDITOR:-vim} +"$hint" "$file_name"
fi

# TODO open multiple:
# nvim -c ":e file1|:69|:e file2|:3"
# TODO special arg: ALL

