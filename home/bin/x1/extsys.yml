dest:
  device: /dev/disk/by-id/usb-SanDisk_Ultra_Fit_*-0:0
  filesystem:
    name: btrfs
    options: noatime,compress=zstd
  sizes:
    boot: 256MB
    luks: 16GB
    # rest of device is filled with an unencrypted exFAT partition

kernel: vmlinuz-linux-zen

postcommands:
  # disable dropbox autostart
  - sed -i -E '/.*dropbox.*/d' $MOUNT$/home/*/.xinitrc

  # avoid hardware dependencies
  - rm -f $MOUNT$/etc/systemd/system/multi-user.target.wants/tlp.service
  - rm -f $MOUNT$/etc/systemd/system/timers.target.wants/fstrim.timer

  # no automatic startx
  - rm -f $MOUNT$/home/*/.zprofile*

exclude:
  - "**/.cache/*"
  - "/home/**/nintendo-switch-hacking/sd"
  - "/home/**/nintendo-switch-hacking/tmp"
  - "/home/*/.cache/*"
  - "/home/*/.dropbox"
  - "/home/*/.local/share/Steam"
  - "/home/*/.local/share/Trash/*"
  - "/home/*/.local/share/thumbnails/*"
  - "/home/*/Dropbox/media"
  - "/home/*/downloads/*"
  - "/home/*/iphone-photos"
  - "/home/*/photos"
  - "/home/*/tmp"
  - "/home/*/videos"
  - "/home/*/vm"
  - /srv/kube
  - /srv/splunk
  - /usr/share/doc/*
  - /usr/share/gtk-doc/*
  - /usr/share/icons
  - /usr/share/texmf-dist
  - /var/cache/*
  - /var/lib/docker/*
  - /var/lib/pacman/sync/*
  - /var/lib/texmf/*
  - /var/log/*
  - /var/tmp/*
