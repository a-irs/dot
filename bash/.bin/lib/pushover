#!/usr/bin/env bash

set -euo pipefail

config_dir=~/.pushover
[[ ! -d "$config_dir" ]] && mkdir "$config_dir"

user_token=$(< "$config_dir/user_token")

app_token=$(< "$config_dir/$1")
shift
message="$*"

curl -s \
  --form-string "token=$app_token" \
  --form-string "user=$user_token" \
  --form-string "message=$message" \
  https://api.pushover.net/1/messages.json

